# 战斗系统

## 战斗流程

进入战斗：当玩家与敌人遭遇时，进入战斗模式。
确定先手：根据角色的速度属性（SPD），决定谁先手进行行动。
回合制：战斗采用回合制，玩家和敌人依次进行行动。

## 角色属性作用

力量（STR）：影响物理攻击力（ATK）和一些物理技能的效果。
敏捷（AGI）：影响速度（SPD）和一些闪避、暴击技能的效果。
体质（CON）：影响生命值（HP）和物理防御力（DEF）。
灵性（SPI）：影响法力值（MP）和法术防御力（MDEF）。
智力（INT）：影响法术攻击力（MATK）和一些法术技能的效果。
幸运（LUK）：影响暴击几率和特殊事件触发率。
悟性（WIT）：影响技能学习效率和一些特殊技能的效果。

## 伤害计算

物理攻击伤害：使用物理攻击技能时，计算伤害如下：
物理攻击伤害 = (角色ATK - 敌人DEF) * 技能系数

法术攻击伤害：使用法术攻击技能时，计算伤害如下：
法术攻击伤害 = (角色MATK - 敌人MDEF) * 技能系数

暴击伤害：如果角色发动暴击，伤害会增加。暴击伤害的计算如下：
暴击伤害 = 正常伤害 * (1 + 暴击伤害加成)

属性克制伤害：根据属性克制关系，如果角色的攻击属性克制敌人的防御属性，伤害会增加。克制伤害的计算如下：
属性克制伤害 = 正常伤害 * (1 + 属性克制伤害加成)

## 濒死状态

当角色（HP）低于 5% 时会进入濒死状态，此时会是有一些濒死状态的特殊效果，例如：

濒死状态下，角色的攻击力和防御力会增加。
濒死状态下，角色的速度会降低。
濒死状态下，角色的法力值会降低。
濒死状态下，角色的暴击几率会增加。
使用濒死状态技能时，技能效果会增强。

## 技能效果

不同技能会有不同的效果，可能是单体攻击、群体攻击、治疗、增益、减益等。技能效果的强弱和持续时间可能与角色属性和技能等级相关。

## 特殊事件触发

根据角色的幸运属性，有一定几率触发特殊事件，例如暴击、连击、额外回合等。特殊事件触发率的计算可以根据幸运属性来决定。

## 回复与治疗

角色可以使用治疗技能来回复生命值和法力值，治疗量可能受到角色的灵性属性和技能效果影响。

## 战斗胜利和奖励

当敌人被击败时，玩家获得经验值和战利品奖励，经验值用于角色升级，战利品可能是装备、道具、金币等。
